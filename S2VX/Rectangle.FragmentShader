#version 330 core
out vec4 fragmentColor;
in vec2 normals;
uniform float feather;
uniform float fade;
uniform vec2 lengths;
uniform vec3 color;
void main() {
	float normalXLength = length(normals.x) * lengths.x;
	float normalYLength = length(normals.y) * lengths.y;
	float featherXPartial = lengths.x - feather;
	float featherYPartial = lengths.y - feather;
	float alpha = fade;
	if (normalXLength > featherXPartial) {
		float normalXPartial = normalXLength - featherXPartial;
		alpha = fade - normalXPartial / feather;
	}
	if (normalYLength > featherYPartial) {
		float normalYPartial = normalYLength - featherYPartial;
		float compare = fade - normalYPartial / feather;
		if (compare < alpha) {
			alpha = compare;
		}
	}
	fragmentColor = vec4(color.r, color.g, color.b, alpha);
}